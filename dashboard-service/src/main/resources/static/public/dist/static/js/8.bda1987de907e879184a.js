(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"3Ruz":function(t,e,i){},VDlb:function(t,e,i){"use strict";var l=i("3Ruz");i.n(l).a},ZySA:function(t,e,i){"use strict";function l(t){t.directive("waves",a)}var n=i("P2sY"),r=i.n(n),a=(i("jUE0"),{bind:function(s,o){s.addEventListener("click",function(t){var e=r()({},o.value),i=r()({ele:s,type:"hit",color:"rgba(0, 0, 0, 0.15)"},e),l=i.ele;if(l){l.style.position="relative",l.style.overflow="hidden";var n=l.getBoundingClientRect(),a=l.querySelector(".waves-ripple");switch(a?a.className="waves-ripple":((a=document.createElement("span")).className="waves-ripple",a.style.height=a.style.width=Math.max(n.width,n.height)+"px",l.appendChild(a)),i.type){case"center":a.style.top=n.height/2-a.offsetHeight/2+"px",a.style.left=n.width/2-a.offsetWidth/2+"px";break;default:a.style.top=(t.pageY-n.top-a.offsetHeight/2-document.documentElement.scrollTop||document.body.scrollTop)+"px",a.style.left=(t.pageX-n.left-a.offsetWidth/2-document.documentElement.scrollLeft||document.body.scrollLeft)+"px"}return a.style.backgroundColor=i.color,!(a.className="waves-ripple z-active")}},!1)}});window.Vue&&(window.waves=a,Vue.use(l)),a.install=l;e.a=a},jUE0:function(t,e,i){},njZP:function(t,e,i){},tNd7:function(t,e,i){"use strict";i.r(e);var l=i("xiF3"),n=i("ZySA"),a=[{value:0,text:"隐藏"},{value:1,text:"公开"},{value:2,text:"普通"},{value:3,text:"中级"},{value:4,text:"高级"}],s=a.reduce(function(t,e){return t[e.value]=e.text,t},{}),o={name:"TemplateManage",directives:{waves:n.a},filters:{levelFilter:function(t){return s[t]},fullImgUrl:function(t){return"http://quickv.kunteng.org.cn/api"+t}},data:function(){return{tableKey:0,tplList:null,total:0,tplListLoading:!0,listQuery:{page:1,limit:20,importance:void 0,title:void 0,type:void 0,sort:"+id"},levelOptions:a,temp:{},dialogFormVisible:!1,dialogStatus:"",createTplRules:{name:[{required:!0,trigger:"blur",validator:function(t,e,i){e.length<=0?i(new Error("模板名称不能为空")):i()}}]}}},created:function(){this.getTemplates()},methods:{getTemplates:function(){var e=this;this.tplListLoading=!0,Object(l.c)().then(function(t){e.tplList=t.data.items,e.total=t.data.total||0,e.tplListLoading=!1,setTimeout(function(){e.tplListLoading=!1},1e3)}).catch(function(){setTimeout(function(){e.tplListLoading=!1},1e3)})},handleFilter:function(){this.listQuery.page=1,this.getTemplates()},resetTemp:function(){this.temp={name:"",isTemplate:!0,about:"大屏模板"}},handleCreate:function(){var t=this;this.resetTemp(),this.dialogStatus="新建模板",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.TplForm.clearValidate()})},createSubmit:function(){var e=this;this.$refs.TplForm.validate(function(t){t&&Object(l.a)(e.temp).then(function(t){e.handleEdit(t.hash)})})},handleDelete:function(t){var e=this;Object(l.b)(t).then(function(t){e.$notify({title:"成功",message:"删除成功",type:"success",duration:2e3}),e.getTemplates()})},handleEdit:function(t){this.$router.push({path:"/edit/dashboard/"+t,query:{redirect:"template"}})}}},r=(i("VDlb"),i("vWTV"),i("KHd+")),c=Object(r.a)(o,function(){var i=this,t=i.$createElement,l=i._self._c||t;return l("div",{staticClass:"app-container"},[l("div",{staticClass:"template-list-cont"},[l("div",{staticClass:"item-box",on:{click:i.handleCreate}},[i._m(0),i._v(" "),i._m(1)]),i._v(" "),i._l(i.tplList,function(e){return l("div",{key:e.hash,staticClass:"item-box"},[l("div",{staticClass:"item-box-top"},[l("div",{staticClass:"item-box-top-img"},[l("img",{attrs:{src:i._f("fullImgUrl")(e.imgUrl)}})]),i._v(" "),l("div",{staticClass:"item-box-top-icon"},[l("i",{staticClass:"el-icon-edit",on:{click:function(t){return i.handleEdit(e.hash)}}}),i._v(" "),l("i",{staticClass:"el-icon-delete",on:{click:function(t){return i.handleDelete(e.hash)}}})])]),i._v(" "),l("div",{staticClass:"item-box-bottom"},[l("h4",{staticClass:"template-item-title"},[i._v(i._s(e.config.title))]),i._v(" "),l("p",[i._v(i._s(i._f("parseTime")(e.timestamp,"{y}-{m}-{d} {h}:{i}"))+" "),l("span",{staticClass:"link-type"},[i._v(i._s(e.config.width+"X"+e.config.height))])])])])})],2),i._v(" "),l("el-dialog",{attrs:{title:"新建模板",visible:i.dialogFormVisible},on:{"update:visible":function(t){i.dialogFormVisible=t}}},[l("el-form",{ref:"TplForm",staticStyle:{width:"500px","margin-left":"50px"},attrs:{model:i.temp,rules:i.createTplRules,"label-position":"top","label-width":"70px"}},[l("el-form-item",{attrs:{label:"模板名称",prop:"title"}},[l("el-input",{model:{value:i.temp.name,callback:function(t){i.$set(i.temp,"name",t)},expression:"temp.name"}})],1),i._v(" "),l("el-form-item",{attrs:{label:"模板级别"}},[l("el-select",{staticClass:"filter-item",attrs:{placeholder:"请选择一个级别"},model:{value:i.temp.level,callback:function(t){i.$set(i.temp,"level",t)},expression:"temp.level"}},i._l(i.levelOptions,function(t){return l("el-option",{key:t.value,attrs:{label:t.text,value:t.value}})}),1)],1)],1),i._v(" "),l("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[l("el-button",{on:{click:function(t){i.dialogFormVisible=!1}}},[i._v(i._s("取消"))]),i._v(" "),l("el-button",{attrs:{type:"primary"},on:{click:function(t){i.dialogStatus,i.createSubmit()}}},[i._v(i._s("创建"))])],1)],1)],1)},[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"item-box-top"},[e("div",{staticClass:"item-box-top-img"},[e("i",{staticClass:"el-icon-plus plus-icon"})])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item-box-bottom"},[i("h4",[t._v("新建模板")]),t._v(" "),i("p",[t._v("添加一个新的模板")])])}],!1,null,"73d176f7",null);e.default=c.exports},vWTV:function(t,e,i){"use strict";var l=i("njZP");i.n(l).a},xiF3:function(t,e,i){"use strict";i.d(e,"c",function(){return n}),i.d(e,"d",function(){return a}),i.d(e,"e",function(){return s}),i.d(e,"a",function(){return o}),i.d(e,"b",function(){return r});var l=i("NW8w");function n(){return Object(l.a)({url:"/templates",method:"get"})}function a(t){return Object(l.a)({url:"/templates/"+t,method:"get"})}function s(t){return Object(l.a)({url:"/templates/"+t.hash,method:"put",data:t})}function o(t){return Object(l.a)({url:"/templates",method:"post",data:t})}function r(t){return Object(l.a)({url:"/templates/"+t,method:"delete"})}}}]);
//# sourceMappingURL=8.bda1987de907e879184a.js.map