(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{Bes9:function(e,r,t){"use strict";t.r(r);var o=t("QbLZ"),s=t.n(o),a=t("L2JU"),l={name:"UserProfile",data:function(){function e(e,r,t){""===r?t(new Error("请输入密码")):r.length<6?t(new Error("密码必须大于6位字符")):(""!==o.ruleForm.checkPass&&o.$refs.ruleForm.validateField("checkPass"),t())}var o=this;return{imageUrl:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",uploadUrl:"",ruleForm:{oldPassword:"",newPassword:"",checkPassword:""},rules:{oldPassword:[{validator:e,trigger:"blur"}],newPassword:[{validator:e,trigger:"blur"}],checkPassword:[{validator:function(e,r,t){""===r?t(new Error("请再次输入密码")):r!==o.ruleForm.newPassword?t(new Error("两次输入密码不一致!")):t()},trigger:"blur"}]}}},computed:s()({},Object(a.b)(["avatar"])),methods:{handleAvatarSuccess:function(e,r){this.imageUrl=URL.createObjectURL(r.raw)},beforeAvatarUpload:function(e){var r="image/png"===e.type,t="image/jpeg"===e.type,o="image/gif"===e.type,s=e.size/1024/1024<2;return console.log(e),t||r||o||this.$message.error("上传头像图片只能是 JPG/PNG/GIF 格式!"),s||this.$message.error("上传头像图片大小不能超过 2MB!"),(t||r||o)&&s},resetForm:function(e){this.$refs[e].resetFields()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.$store.dispatch("UpdateAccount",t.ruleForm).then(function(e){if(0===e.code){t.$message({message:"密码修改成功, 请重新登陆",type:"success",duration:3e3});var r=t;setTimeout(function(){r.$store.dispatch("LogOut").then(function(){location.reload()})},3e3)}})})}}},i=(t("inUp"),t("KHd+")),n=Object(i.a)(l,function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",{staticClass:"info-container"},[t("div",{staticStyle:{float:"left"}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:r.ruleForm,"status-icon":"",rules:r.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"原密码",prop:"oldPassword"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:r.ruleForm.oldPassword,callback:function(e){r.$set(r.ruleForm,"oldPassword",e)},expression:"ruleForm.oldPassword"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"新密码",prop:"newPassword"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:r.ruleForm.newPassword,callback:function(e){r.$set(r.ruleForm,"newPassword",e)},expression:"ruleForm.newPassword"}})],1),r._v(" "),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[t("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:r.ruleForm.checkPassword,callback:function(e){r.$set(r.ruleForm,"checkPassword",e)},expression:"ruleForm.checkPassword"}})],1),r._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(e){return r.submitForm("ruleForm")}}},[r._v("提交")]),r._v(" "),t("el-button",{on:{click:function(e){return r.resetForm("ruleForm")}}},[r._v("重置")])],1)],1)],1),r._v(" "),t("div",{staticStyle:{float:"left","margin-left":"50px"}},[t("el-upload",{staticClass:"avatar-uploader",attrs:{action:r.uploadUrl,"show-file-list":!1,"on-success":r.handleAvatarSuccess,"before-upload":r.beforeAvatarUpload}},[t("img",{staticClass:"avatar",attrs:{src:r.avatar}}),r._v(" "),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[r._v("点击更改头像")])])],1)])},[],!1,null,null,null);r.default=n.exports},G4SU:function(e,r,t){},inUp:function(e,r,t){"use strict";var o=t("G4SU");t.n(o).a}}]);
//# sourceMappingURL=10.33494615f101ef0d2ef7.js.map