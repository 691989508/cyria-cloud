{"version":3,"sources":["waves.css","/home/caizhibang/czb/springboot/learn/Cryia/src/views/dashboard/src/views/dashboard/Template.vue","/home/caizhibang/czb/springboot/learn/Cryia/src/views/dashboard/Template.vue"],"names":[],"mappings":"AAAA,cACI,iBAAkB,CAClB,kBAAmB,CACnB,gCAAqC,CACrC,2BAA4B,CAC5B,mBAAoB,CACpB,wBAAyB,CACzB,qBAAsB,CACtB,oBAAqB,CACrB,gBAAiB,CACjB,0BAA2B,CAE3B,kBAAmB,CACnB,SACJ,CAEA,uBACI,SAAU,CACV,0BAA2B,CAE3B,kBAAmB,CACnB,uEAA0E,CAC1E,+DAAkE,CAClE,uDAA0D,CAC1D,sFACJ,CCmKA,oBACA,UAAA,CACA,mBAAA,CAAA,mBAAA,CAAA,YAAA,CACA,6BAAA,CAAA,4BAAA,CAAA,sBAAA,CAAA,kBAAA,CACA,kBAAA,CAAA,cACA,CACA,UACA,WAAA,CACA,YAAA,CACA,oBAAA,CACA,6BAAA,CAAA,qBAAA,CACA,qBAEA,CACA,gBACA,8CAAA,CAAA,sCACA,CACA,cACA,UAAA,CACA,YAAA,CACA,iBAAA,CACA,4BACA,CACA,kBACA,UAAA,CACA,WAAA,CACA,iBAAA,CACA,iBAAA,CACA,SACA,CACA,sBACA,UAAA,CACA,WAAA,CACA,aACA,CACA,mBACA,iBAAA,CACA,YAAA,CACA,SAAA,CACA,UAAA,CACA,WAAA,CACA,eAAA,CACA,UAAA,CACA,cAAA,CACA,iBAAA,CACA,yBACA,CACA,qBACA,cACA,CACA,0CACA,eAEA,CACA,uCACA,aACA,CACA,WACA,cAAA,CACA,eAAA,CACA,cAAA,CACA,UACA,CACA,iBACA,cACA,CACA,oBACA,cAAA,CACA,eAAA,CACA,eACA,CACA,mBACA,cAAA,CACA,cAAA,CACA,UACA,CCGE,sCACE,aAAc,CACd,UAAU,CACV,eAAe,CACf,sBAAsB,CACtB,kBAAkB,CAEtB,qCACE,WAAW,CACX,eAAe,CAFjB,sDAKI,iBAAkB,CAClB,YAAa,CACb,WAAY,CACZ,iBAAkB,CARtB,0DAUM,UAAW,CACX,WAAY,CACZ,iCAA2B,CAA3B,yBAA2B,CAZjC,gEAcQ,4BAA0B,CAA1B,oBAA0B,CAC1B,6BAAsB,CAAtB,qBAAsB,CAf9B,yDAoBI,iBAAiB,CACjB,QAAS,CACT,WAAY,CACZ,UAAW,CAEX,YAAY,CACZ,YAAa,CA1BjB,2DA6BI,aAAc,CACd,YAAa,CACb,eAAgB,CAChB,cAAc,CAhClB,gFAmCI,aAAc,CAnClB,sDAsCI,eAAgB,CAChB,gBAAiB,CACjB,cAAe,CACf,UAAW","file":"app.59f569e3a245.css","sourcesContent":[".waves-ripple {\n    position: absolute;\n    border-radius: 100%;\n    background-color: rgba(0, 0, 0, 0.15);\n    background-clip: padding-box;\n    pointer-events: none;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    -webkit-transform: scale(0);\n    -ms-transform: scale(0);\n    transform: scale(0);\n    opacity: 1;\n}\n\n.waves-ripple.z-active {\n    opacity: 0;\n    -webkit-transform: scale(2);\n    -ms-transform: scale(2);\n    transform: scale(2);\n    -webkit-transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, -webkit-transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out;\n    transition: opacity 1.2s ease-out, transform 0.6s ease-out, -webkit-transform 0.6s ease-out;\n}","<template>\n  <div class=\"app-container\">\n\n    <div class=\"template-list-cont\">\n      <div class=\"item-box\"  @click=\"handleCreate\">\n        <div class=\"item-box-top\">\n          <div class=\"item-box-top-img\">\n            <i class=\"el-icon-plus plus-icon\"/>\n          </div>\n        </div>\n        <div class=\"item-box-bottom\">\n          <h4>新建模板</h4>\n          <p>添加一个新的模板</p>\n        </div>\n      </div>\n      <div class=\"item-box\" v-for=\"item in tplList\" :key=\"item.hash\">\n        <div class=\"item-box-top\">\n          <div class=\"item-box-top-img\">\n            <img :src=\"item.imgUrl | fullImgUrl\">\n          </div>\n          <div class=\"item-box-top-icon\">\n            <i class=\"el-icon-edit\" @click=\"handleEdit(item.hash)\"></i>\n            <i class=\"el-icon-delete\" @click=\"handleDelete(item.hash)\"></i>\n          </div>\n        </div>\n        <div class=\"item-box-bottom\">\n          <h4 class=\"template-item-title\">{{item.config.title}}</h4>\n          <p>{{ item.timestamp | parseTime('{y}-{m}-{d} {h}:{i}') }} <span class=\"link-type\" >{{ item.config.width + 'X' + item.config.height }}</span></p>\n        </div>\n      </div>\n    </div>\n\n    <!--新建大屏-->\n    <el-dialog :title=\"'新建模板'\" :visible.sync=\"dialogFormVisible\">\n      <el-form ref=\"TplForm\" :model=\"temp\" :rules=\"createTplRules\" label-position=\"top\" label-width=\"70px\" style=\"width: 500px; margin-left:50px;\">\n\n        <el-form-item :label=\"'模板名称'\" prop=\"title\">\n          <el-input v-model=\"temp.name\"/>\n        </el-form-item>\n        <el-form-item :label=\"'模板级别'\">\n          <el-select v-model=\"temp.level\" class=\"filter-item\" placeholder=\"请选择一个级别\">\n            <el-option v-for=\"item in levelOptions\" :key=\"item.value\" :label=\"item.text\" :value=\"item.value\"/>\n          </el-select>\n        </el-form-item>\n      </el-form>\n      <div slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"dialogFormVisible = false\">{{ '取消' }}</el-button>\n        <el-button type=\"primary\" @click=\"dialogStatus===createSubmit()\">{{ '创建' }}</el-button>\n      </div>\n    </el-dialog>\n\n  </div>\n</template>\n\n<script>\nimport { fetchList, createTemplate, deleteTemplate } from '@/api/template'\nimport waves from '@/directive/waves' // Waves directive\n// import { parseTime } from '@/scripts'\n\nconst levelOptions = [\n  { value: 0, text: '隐藏' },\n  { value: 1, text: '公开' },\n  { value: 2, text: '普通' },\n  { value: 3, text: '中级' },\n  { value: 4, text: '高级' }\n]\n\nconst levelTypeKeyValue = levelOptions.reduce((acc, cur) => {\n  acc[cur.value] = cur.text\n  return acc\n}, {})\n\nexport default {\n  name: 'TemplateManage',\n  directives: { waves },\n  filters: {\n    levelFilter (v) {\n      return levelTypeKeyValue[v]\n    },\n    fullImgUrl (url) {\n      return process.env.BASE_API + url\n    }\n  },\n  data () {\n    const validateTplName = (rule, value, callback) => {\n      if (value.length <= 0) {\n        callback(new Error('模板名称不能为空'))\n      } else {\n        callback()\n      }\n    }\n\n    return {\n      tableKey: 0,\n      tplList: null,\n      total: 0,\n      tplListLoading: true,\n      listQuery: {\n        page: 1,\n        limit: 20,\n        importance: undefined,\n        title: undefined,\n        type: undefined,\n        sort: '+id'\n      },\n      levelOptions,\n      temp: {},\n      dialogFormVisible: false,\n      dialogStatus: '',\n      createTplRules: {\n        name: [{ required: true, trigger: 'blur', validator: validateTplName }]\n      }\n    }\n  },\n  created () {\n    this.getTemplates()\n  },\n  methods: {\n    getTemplates () {\n      this.tplListLoading = true\n      fetchList().then(response => {\n        this.tplList = response.data.items\n        this.total = response.data.total || 0\n        this.tplListLoading = false\n\n        setTimeout(() => {\n          this.tplListLoading = false\n        }, 1 * 1000)\n      }).catch(() => {\n        setTimeout(() => {\n          this.tplListLoading = false\n        }, 1 * 1000)\n      })\n    },\n    handleFilter () {\n      this.listQuery.page = 1\n      this.getTemplates()\n    },\n    resetTemp () {\n      this.temp = {\n        name: '',\n        isTemplate: true,\n        about: '大屏模板'\n      }\n    },\n    handleCreate () {\n      this.resetTemp()\n      this.dialogStatus = '新建模板'\n      this.dialogFormVisible = true\n      this.$nextTick(() => {\n        this.$refs['TplForm'].clearValidate()\n      })\n    },\n    createSubmit () {\n      this.$refs['TplForm'].validate((valid) => {\n        if (valid) {\n          createTemplate(this.temp).then(response => {\n            // 跳转到编辑页面\n            this.handleEdit(response.hash)\n          })\n        }\n      })\n    },\n    handleDelete: function (hash) {\n      deleteTemplate(hash).then(response => {\n        this.$notify({\n          title: '成功',\n          message: '删除成功',\n          type: 'success',\n          duration: 2000\n        })\n        // <!-- const index = this.list.indexOf(row) -->\n        // <!-- this.list.splice(index, 1) -->\n        this.getTemplates()\n      })\n    },\n    handleEdit (hash) {\n      this.$router.push({\n        path: '/edit/dashboard/' + hash,\n        query: {\n          redirect: 'template'\n        }\n      })\n    }\n  }\n}\n</script>\n<style>\n  .template-list-cont{\n    width:100%;\n    display: flex;\n    flex-direction: row;\n    flex-wrap: wrap;\n  }\n  .item-box{\n    width: 250px;\n    height:260px;\n    margin: 0 20px 20px 0;\n    box-sizing: border-box;\n    border:1px solid #eee;\n    /*background:#eee;*/\n  }\n  .item-box:hover{\n    box-shadow: 0 2px 12px 0 rgba(0,0,0,.1);\n  }\n  .item-box-top{\n    width:100%;\n    height:180px;\n    position: relative;\n    border-bottom:1px solid #eee;\n  }\n  .item-box-top-img{\n    width:100%;\n    height: 100%;\n    position: absolute;\n    text-align: center;\n    z-index: 0;\n  }\n  .item-box-top-img img{\n    width:100%;\n    height:100%;\n    display: block;\n  }\n  .item-box-top-icon{\n    position: absolute;\n    display: none;\n    z-index: 1;\n    width:100%;\n    height:100%;\n    padding-top:30%;\n    color:#fff;\n    font-size: 26px;\n    text-align: center;\n    background: rgba(0,0,0,0.4);\n  }\n  .item-box-top-icon i{\n    cursor: pointer;\n  }\n  .item-box-top:hover .item-box-top-img img{\n    overflow: hidden;\n    /*transform: scale(1.1, 1.1);*/\n  }\n  .item-box-top:hover .item-box-top-icon{\n    display: block;\n  }\n  .plus-icon{\n    font-size: 60px;\n    font-weight: bold;\n    margin-top:20%;\n    color:#666;\n  }\n  .item-box-bottom{\n    padding: 0 10px;\n  }\n  .item-box-bottom h4{\n    font-size: 16px;\n    margin:16px 0 0 0;\n    font-weight: normal;\n  }\n  .item-box-bottom p{\n    font-size:14px;\n    margin:6px 0 0 0;\n    color:#999;\n  }\n</style>\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\n  .template-item-title{\n    display: block;\n    width:100%;\n    overflow:hidden;\n    text-overflow:ellipsis;\n    white-space:nowrap;\n  }\n.box-card-component {\n  width:250px;\n  margin-left:8px;\n\n  .box-card-header {\n    position: relative;\n    height: 150px;\n    width: 150px;\n    text-align: center;\n    img {\n      width: 100%;\n      height: 100%;\n      transition: all 0.2s linear;\n      &:hover {\n        transform: scale(1.1, 1.1);\n        filter: contrast(130%);\n      }\n    }\n  }\n  .box-card-operation {\n    position:absolute;\n    bottom: 0;\n    height: 30px;\n    width: 100%;\n    // background-color: #999;\n    display:none;\n    z-index: 1000;\n  }\n  .box-card-operation i{\n    color: #606266;\n    margin: 0 7px;\n    font-size: 1.5em;\n    cursor:pointer;\n  }\n  .box-card-header:hover .box-card-operation {\n    display: block;\n  }\n  .box-card-bottom {\n    margin-top: 13px;\n    line-height: 12px;\n    font-size: 13px;\n    color: #999;\n  }\n}\n</style>\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n  .template-item-title{\n    display: block;\n    width:100%;\n    overflow:hidden;\n    text-overflow:ellipsis;\n    white-space:nowrap;\n  }\n.box-card-component {\n  width:250px;\n  margin-left:8px;\n\n  .box-card-header {\n    position: relative;\n    height: 150px;\n    width: 150px;\n    text-align: center;\n    img {\n      width: 100%;\n      height: 100%;\n      transition: all 0.2s linear;\n      &:hover {\n        transform: scale(1.1, 1.1);\n        filter: contrast(130%);\n      }\n    }\n  }\n  .box-card-operation {\n    position:absolute;\n    bottom: 0;\n    height: 30px;\n    width: 100%;\n    // background-color: #999;\n    display:none;\n    z-index: 1000;\n  }\n  .box-card-operation i{\n    color: #606266;\n    margin: 0 7px;\n    font-size: 1.5em;\n    cursor:pointer;\n  }\n  .box-card-header:hover .box-card-operation {\n    display: block;\n  }\n  .box-card-bottom {\n    margin-top: 13px;\n    line-height: 12px;\n    font-size: 13px;\n    color: #999;\n  }\n}\n"]}